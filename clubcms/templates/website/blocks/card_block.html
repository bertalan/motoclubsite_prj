{% load wagtailcore_tags wagtailimages_tags %}

<article class="block-card">
    {% if self.badge_text %}
    <span class="block-card__badge">{{ self.badge_text }}</span>
    {% endif %}
    {% if self.image %}
        {% image self.image fill-400x250 as card_img %}
        <div class="block-card__image">
            {% if self.link_page %}
            <a href="{% pageurl self.link_page %}">
                <img src="{{ card_img.url }}" alt="{{ self.title }}" loading="lazy" width="{{ card_img.width }}" height="{{ card_img.height }}">
            </a>
            {% elif self.link_url %}
            <a href="{{ self.link_url }}" target="_blank" rel="noopener noreferrer">
                <img src="{{ card_img.url }}" alt="{{ self.title }}" loading="lazy" width="{{ card_img.width }}" height="{{ card_img.height }}">
            </a>
            {% else %}
            <img src="{{ card_img.url }}" alt="{{ self.title }}" loading="lazy" width="{{ card_img.width }}" height="{{ card_img.height }}">
            {% endif %}
        </div>
    {% endif %}
    <div class="block-card__body">
        <h3 class="block-card__title">{{ self.title }}</h3>
        {% if self.text %}
        <p class="block-card__text">{{ self.text }}</p>
        {% endif %}
        {% if self.link_text %}
            {% if self.link_page %}
            <a href="{% pageurl self.link_page %}" class="block-card__link">{{ self.link_text }}</a>
            {% elif self.link_url %}
            <a href="{{ self.link_url }}" class="block-card__link" target="_blank" rel="noopener noreferrer">{{ self.link_text }}</a>
            {% endif %}
        {% endif %}
    </div>
</article>
