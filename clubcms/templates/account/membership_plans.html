{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Become a member" %} | {{ block.super }}{% endblock %}

{% block content %}
<div class="container">
    <div class="section-header" style="text-align: center; margin: 3rem 0 1rem;">
        <h1>{% trans "Become a member" %}</h1>
        <p style="color: var(--color-text-muted, #666); max-width: 600px; margin: 0.5rem auto;">
            {% trans "Choose the membership plan that best fits your needs. Combine multiple products to customize your experience." %}
        </p>
    </div>

    <div class="pricing-grid">
        {% for product in products %}
        <div class="pricing-card {% if product.pk in user_products %}pricing-card--active{% endif %}">
            {% if product.pk in user_products %}
                <span class="pricing-card__badge">{% trans "Your plan" %}</span>
            {% endif %}
            <h2 class="pricing-card__name">{{ product.name }}</h2>
            <div class="pricing-card__price">
                &euro;{{ product.price }}
                <small>/ {% trans "year" %}</small>
            </div>
            {% if product.description %}
            <p style="font-size: 0.875rem; color: var(--color-text-muted); margin-bottom: 1rem;">
                {{ product.description }}
            </p>
            {% endif %}
            <ul class="pricing-card__features">
                {% if product.grants_events %}
                <li>{% trans "Event registration" %}</li>
                {% endif %}
                {% if product.grants_vote %}
                <li>{% trans "Voting rights" %}</li>
                {% endif %}
                {% if product.grants_upload %}
                <li>{% trans "Gallery upload" %}</li>
                {% endif %}
                {% if product.grants_discount %}
                <li>{% blocktrans with percent=product.discount_percent %}{{ percent }}% discount on events{% endblocktrans %}</li>
                {% endif %}
            </ul>
            {% if not request.user.is_authenticated %}
                <a href="{% url 'account_signup' %}" class="btn btn-primary btn-block">
                    {% trans "Sign up" %}
                </a>
            {% elif product.pk not in user_products %}
                <a href="{% url 'account:profile' %}" class="btn btn-outline btn-block">
                    {% trans "Contact the club" %}
                </a>
            {% endif %}
        </div>
        {% empty %}
        <p>{% trans "No membership plans available at this time." %}</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
